#!/usr/bin/env ruby
# frozen_string_literal: true

require "bundler/setup"
require "microkorg"
require "tty-markdown"

# (If you use this, don't forget to add pry to your Gemfile!)
# require "pry"
# Pry.start


filename = "data/C_A3_Init_Program.mk2prog"


def inspect_jexus
  files = Dir['data/jexus/*.mk2prog']
  puts files, "\n"
  print "Digite o nome do arquivo: "
  filename = gets.chomp
end

if ARGV.size == 1
  filename = "data/C_#{ARGV.shift.upcase}_Init_Program.mk2prog"
end
puts filename

raw_content = File.binread(filename)
p = Microkorg::Program.read(raw_content)

puts TTY::Markdown.parse <<README
# Relatório

Lorem ipsum.

```ruby
puts 'hello'
```

---

## Tabela

| Título 1 | Título 2 |
| -------- | -------- |
| a1       |  b1      |
| a2       |  b2      |

README

require "irb"
IRB.start(__FILE__)

File.write('output.mk2prog', p.to_binary_s)

